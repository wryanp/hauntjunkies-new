@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    scroll-behavior: smooth;
    /* Better mobile support - prevent horizontal scroll */
    overflow-x: hidden;
    /* Prevent text size adjustment on orientation change */
    -webkit-text-size-adjust: 100%;
    -moz-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
    /* Prevent zoom on orientation change */
    touch-action: manipulation;
  }

  body {
    @apply bg-black text-white;
    /* Prevent horizontal scroll on mobile */
    overflow-x: hidden;
    width: 100vw;
    min-width: 100vw;
    max-width: 100vw;
    position: relative;
    /* Better touch scrolling on Android */
    -webkit-overflow-scrolling: touch;
    /* Prevent text selection issues on Android */
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    /* Better font rendering on Android */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* Prevent text size adjustment but allow page scaling */
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  /* Fix for Android viewport height issues */
  * {
    /* Prevent content overflow on mobile */
    -webkit-tap-highlight-color: transparent;
    /* Ensure proper box sizing */
    box-sizing: border-box;
  }

  /* Prevent layout shift on orientation change */
  img, video, iframe {
    max-width: 100%;
    height: auto;
  }

  /* Ensure sections fill viewport properly */
  section {
    width: 100%;
    max-width: 100vw;
  }

  /* Better input handling on Android and iOS */
  input, textarea, select, button {
    /* Prevent zoom on input focus in mobile browsers */
    font-size: 16px;
    /* iOS-specific fixes */
    -webkit-appearance: none;
    border-radius: 0;
  }

  /* iOS Safari specific fixes */
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="number"],
  input[type="password"],
  textarea {
    /* Prevent iOS Safari from adding default styling */
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
  }

  /* Better mobile scrolling */
  html, body {
    /* Allow pull-to-refresh on mobile browsers */
    overscroll-behavior-y: auto;
    -webkit-overflow-scrolling: touch;
  }
}

/* Custom parallax styles */
@layer utilities {
  .parallax {
    background-attachment: fixed;
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
  }

  /* Disable parallax on mobile for better performance */
  @media (max-width: 768px) {
    .parallax {
      background-attachment: scroll;
    }
  }

  .bg-overlay-dark::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 1;
  }

  .content-over-overlay {
    position: relative;
    z-index: 2;
  }

  /* Android-specific mobile viewport height fix with fallback */
  .mobile-vh-100 {
    min-height: 100vh; /* Fallback for older browsers */
    min-height: -webkit-fill-available; /* Webkit fallback for older Android */
    min-height: 100dvh; /* Dynamic viewport height for modern browsers */
    min-height: calc(var(--vh, 1vh) * 100); /* JavaScript-calculated height for maximum compatibility */
  }

  /* Full height with custom property */
  .vh-100 {
    height: 100vh;
    height: -webkit-fill-available;
    height: 100dvh;
    height: calc(var(--vh, 1vh) * 100);
  }

  /* Better touch targets for mobile */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  /* Hardware acceleration for better Android performance */
  .hw-accelerate {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    will-change: transform;
  }

  /* Optional: Prevent overscroll on specific elements if needed */
  /* By default, pull-to-refresh is ENABLED for better UX */
  .no-overscroll {
    overscroll-behavior: none;
    -webkit-overscroll-behavior: none;
  }

  /* Allow pull-to-refresh explicitly */
  .allow-overscroll {
    overscroll-behavior: auto;
    -webkit-overscroll-behavior: auto;
  }

  /* iOS Safe Area support */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-right {
    padding-right: env(safe-area-inset-right);
  }

  /* iOS Safari video fixes */
  video {
    /* Prevent iOS Safari from forcing fullscreen */
    object-fit: cover;
  }

  /* iOS momentum scrolling */
  .smooth-scroll {
    -webkit-overflow-scrolling: touch;
    overflow-y: scroll;
  }

  /* Fix iOS Safari position fixed issues */
  @supports (-webkit-touch-callout: none) {
    .ios-fixed-fix {
      position: -webkit-sticky;
      position: sticky;
    }
  }

  /* Smooth orientation change transitions - mobile only */
  @media (max-width: 767px) and (orientation: portrait) {
    body {
      width: 100vw;
    }
  }

  @media (max-width: 767px) and (orientation: landscape) {
    body {
      width: 100vw;
    }
  }
}

/* Prevent automatic zoom on orientation change - mobile only */
@media screen and (max-width: 767px) and (orientation: portrait) {
  html {
    transform: scale(1);
    transform-origin: 0 0;
  }
}

@media screen and (max-width: 767px) and (orientation: landscape) {
  html {
    transform: scale(1);
    transform-origin: 0 0;
  }
}

/* Mobile landscape optimizations */
@media screen and (max-width: 767px) and (max-height: 500px) and (orientation: landscape) {
  /* Reduce vertical spacing in landscape */
  .landscape-compact {
    padding-top: 0.5rem !important;
    padding-bottom: 0.5rem !important;
  }

  /* Smaller text in landscape */
  .landscape-text-sm {
    font-size: 0.875rem !important;
    line-height: 1.25rem !important;
  }

  /* Reduce section heights */
  section {
    min-height: auto !important;
  }
}

/* Mobile portrait optimizations */
@media screen and (max-width: 500px) and (orientation: portrait) {
  /* Better touch targets in portrait */
  button, a[role="button"] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Optimize vertical spacing */
  .portrait-spacing {
    padding-top: 1.5rem;
    padding-bottom: 1.5rem;
  }

  /* Better typography for portrait */
  h1 {
    font-size: 1.875rem; /* 30px */
    line-height: 2.25rem;
  }

  h2 {
    font-size: 1.5rem; /* 24px */
    line-height: 2rem;
  }

  h3 {
    font-size: 1.25rem; /* 20px */
    line-height: 1.75rem;
  }

  p {
    font-size: 1rem; /* 16px */
    line-height: 1.5rem;
  }
}

/* Global mobile typography */
@media screen and (max-width: 768px) {
  /* Ensure readable text on small screens */
  body {
    font-size: 16px;
    line-height: 1.5;
  }

  /* Optimize headings for mobile */
  h1, h2, h3, h4, h5, h6 {
    word-wrap: break-word;
  }

  /* Better button sizing */
  button, .btn, a[class*="button"] {
    padding: 0.75rem 1.25rem;
    font-size: 1rem;
  }

  /* Images responsive */
  img {
    max-width: 100%;
    height: auto;
  }

  /* Form elements optimization */
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="number"],
  input[type="password"],
  input[type="date"],
  textarea,
  select {
    width: 100%;
    font-size: 16px !important; /* Prevent zoom on focus */
    padding: 0.75rem;
    line-height: 1.5;
  }

  /* Textarea specific */
  textarea {
    min-height: 120px;
    resize: vertical;
  }

  /* Labels */
  label {
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    display: block;
  }
}

/* Form optimizations for landscape */
@media screen and (max-width: 767px) and (max-height: 500px) and (orientation: landscape) {
  /* More compact forms in landscape */
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="number"],
  input[type="password"],
  input[type="date"],
  textarea,
  select {
    padding: 0.5rem 0.75rem;
    font-size: 14px !important;
  }

  textarea {
    min-height: 80px;
  }

  label {
    font-size: 0.75rem;
    margin-bottom: 0.25rem;
  }

  /* Stack form fields in landscape for better use of horizontal space */
  form > div {
    margin-bottom: 0.75rem;
  }
}

/* Card and grid optimizations for mobile */
@media screen and (max-width: 768px) {
  /* Card padding adjustments */
  [class*="card"], [class*="rounded"] {
    padding: 1rem;
  }

  /* Modal and overlay improvements */
  [class*="modal"], [class*="dialog"] {
    max-width: 95vw;
    margin: 1rem;
  }
}

/* Landscape-specific layout optimizations */
@media screen and (max-width: 767px) and (max-height: 500px) and (orientation: landscape) {
  /* Reduce vertical padding on cards */
  [class*="card"], [class*="rounded"] {
    padding: 0.75rem 1rem;
  }

  /* Make modals wider but shorter in landscape */
  [class*="modal"], [class*="dialog"] {
    max-width: 90vw;
    max-height: 90vh;
    overflow-y: auto;
  }

  /* Compact spacing for sections */
  section > div {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
  }
}
